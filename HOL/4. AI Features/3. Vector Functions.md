# Vector Functions

This lab introduces new vector utility functions in SQL Server 2025. You'll learn how to analyze and normalize vector data using:

- `VECTOR_NORM`
- `VECTOR_NORMALIZE`
- `VECTORPROPERTY`

Start by pressing `CTRL+N` to open a new query window for this lab in SSMS. Then switch to the AdventureWorks2019 database:

## Create the DemoVectors Table

First, create a new database named `VectorDemo` and set it as the current database:

```sql
CREATE DATABASE VectorDemo
GO
```

Then run the following script to create a sample table with vector data:

```sql
CREATE TABLE DemoVectors (
 Id INT PRIMARY KEY,
 RawVector VECTOR(REAL, 4)
)

INSERT INTO DemoVectors (Id, RawVector) VALUES 
 (1, VECTOR([1.0, 2.0, 2.0, 1.0])),
 (2, VECTOR([0.0, 3.0, 4.0, 0.0])),
 (3, VECTOR([2.0, 2.0, 2.0, 2.0]))
```

## Compute Norms

The `VECTOR_NORM` function is useful for computing cosine similarity scores.

Run this code to compute the magnitude of each vector using `VECTOR_NORM`.

```sql
SELECT 
  Id,
  VECTOR_NORM(RawVector) AS VectorNorm
FROM
  DemoVectors
```

## Normalize Vectors

`VECTOR_NORMALIZE` is commonly used before inserting data into DiskANN indexes.

This code normalizes the vectors to unit length.

```sql
SELECT 
  Id,
  VECTOR_NORMALIZE(RawVector) AS NormalizedVector
FROM
  DemoVectors
```

## Inspect Vector Properties

Finally, `VECTORPROPERTY` helps inspect vector metadata before using it in searches.

Run this code to examine properties like `Dimension`, `Length`, and `DataType`.

```sql
SELECT 
  Id,
  VECTORPROPERTY(RawVector, 'Dimension') AS Dimension,
  VECTORPROPERTY(RawVector, 'Length') AS Length,
  VECTORPROPERTY(RawVector, 'DataType') AS DataType
FROM
  DemoVectors
```
