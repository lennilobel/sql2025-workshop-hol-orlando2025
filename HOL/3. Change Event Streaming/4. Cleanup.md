# Cleanup

---

### Drop CES Stream Group

This statement drops the stream group and all associated table bindings.

```sql
EXEC sys.sp_ces_drop_stream_group @stream_group = N'CesDemoGroup_<firstname_lastname_>'
```

Delete the database:

```sql
USE master

ALTER DATABASE CesDemo SET SINGLE_USER WITH ROLLBACK IMMEDIATE
DROP DATABASE CesDemo
```

### Stop the C# Client

Back in Visual Studio, stop the `CESClient` console application if it's still running.

* Click **Stop Debugging**
* Or press `Shift + F5`

Your lab environment is now clean.

---

✅ You're done! You’ve now completed a full round-trip demo of Change Event Streaming in SQL Server 2025 using a shared Azure Event Hub.

```sql
USE CesDemo_john_smith
GO

-- Note: A database cannot be dropped if it has active streaming groups and objects

-- Remove tables from streaming group
EXEC sys.sp_remove_object_from_event_stream_group 'SqlCesGroup', 'dbo.Product'
EXEC sys.sp_remove_object_from_event_stream_group 'SqlCesGroup', 'dbo.Customer'
EXEC sys.sp_remove_object_from_event_stream_group 'SqlCesGroup', 'dbo.Order'
EXEC sys.sp_remove_object_from_event_stream_group 'SqlCesGroup', 'dbo.OrderDetail'
EXEC sys.sp_remove_object_from_event_stream_group 'SqlCesGroup', 'dbo.TableWithNoPK'

-- Drop stream group and disable CES
EXEC sys.sp_drop_event_stream_group 'SqlCesGroup'
EXEC sys.sp_disable_event_stream

-- Delete DB
USE master

-- Set the database to single user mode
ALTER DATABASE CesDemo_john_smith SET SINGLE_USER WITH ROLLBACK IMMEDIATE

-- Drop the database
DROP DATABASE CesDemo_john_smith
```